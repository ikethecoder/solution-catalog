{
  "name": "strongswan",
  "services": [],
  "resources": [

    {
      "digitalocean_dns": {
        "vpn": {
          "environment": "${environmentName}",
          "droplet": "${instanceName}",
          "domain-id": "${es.fqdn_id}",
          "domain": "${es.fqdn}",
          "a": {
            "name": "vpn",
            "address": "${dollar}{var.compute_instance.${instanceName}.publicIp}"
          }
        }
      }
    },
    {
      "digitalocean_dns": {
        "vpn": {
          "environment": "${environmentName}",
          "droplet": "${instanceName}",
          "domain-id": "${es.fqdn_id}",
          "domain": "${es.fqdn}",
          "a": {
            "name": "internal",
            "address": "${dollar}{var.compute_instance.${instanceName}.privateIp}"
          }
        }
      }
    },
    {
      "service_endpoint": {
        "${instanceId}-strongswan": {
          "service": "strongswan",
          "segment":"${segmentId}",
          "type":"Service"
        }
      }
    }
  ]
}
