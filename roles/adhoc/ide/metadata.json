{
  "services": [],
  "resources": [
    {
      "service_discovery_service": {
        "${instanceId}-ide": {
          "Name": "${instanceId}-ide",
          "Address": "${instance.privateIp}",
          "Port": 8000,
          "Tags" : [ "${instanceId}", "${environmentId}" ],
          "Check": {
            "http": "http://${instance.privateIp}:8000",
            "interval": "10s",
            "timeout": "1s"
          }
        }
      }
    },
    {
      "proxy_service": {
        "${instanceId}-ide": {
          "environment": "cd",
          "serverNumber": 1,
          "segment": "ci",
          "privateKey": "master_key",
          "proxy_ssl_virtual_host": "default",
          "location": "/${instanceId}-ide/",
          "template": "ide.tmpl",
          "passthrough": "https://${instanceId}-ide.service.dc1.consul:8000"
        }
      }
    },
    {
      "service_endpoint": {
        "${instanceId}-ide": {
          "service": "ide",
          "segment":"${segmentId}",
          "secure":"https://${secureDomain}/${instanceId}-ide"
        }
      }
    }
  ]
}